<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML3.2 EN">
<HTML>
<HEAD> <link rel="canonical" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/PC/PCGAMGSetThreshold.html" />
<META NAME="GENERATOR" CONTENT="DOCTEXT">
<TITLE>PCGAMGSetThreshold</TITLE>
</HEAD>
<BODY BGCOLOR="FFFFFF">
   <div id="version" align=right><b>petsc-3.14.6 2021-03-30</b></div>
   <div id="bugreport" align=right><a href="mailto:petsc-maint@mcs.anl.gov?subject=Typo or Error in Documentation &body=Please describe the typo or error in the documentation: petsc-3.14.6 v3.14.6 docs/manualpages/PC/PCGAMGSetThreshold.html "><small>Report Typos and Errors</small></a></div>
<A NAME="PCGAMGSetThreshold"><H1>PCGAMGSetThreshold</H1></A>
Relative threshold to use for dropping edges in aggregation graph 
<H3><FONT COLOR="#CC3333">Synopsis</FONT></H3>
<PRE>
#include "petscpc.h" 
#include "petscksp.h" 
<A HREF="../Sys/PetscErrorCode.html#PetscErrorCode">PetscErrorCode</A> <A HREF="../PC/PCGAMGSetThreshold.html#PCGAMGSetThreshold">PCGAMGSetThreshold</A>(<A HREF="../PC/PC.html#PC">PC</A> pc, <A HREF="../Sys/PetscReal.html#PetscReal">PetscReal</A> v[], <A HREF="../Sys/PetscInt.html#PetscInt">PetscInt</A> n)
</PRE>
Not collective on <A HREF="../PC/PC.html#PC">PC</A>
<P>
<H3><FONT COLOR="#CC3333">Input Parameters</FONT></H3>
<TABLE border="0" cellpadding="0" cellspacing="0">
<TR><TD WIDTH=40></TD><TD ALIGN=LEFT VALIGN=TOP><B>pc </B></TD><TD>- the preconditioner context
</TD></TR>
<TR><TD WIDTH=40></TD><TD ALIGN=LEFT VALIGN=TOP><B>threshold </B></TD><TD>- array of threshold values for finest n levels; 0.0 means keep all nonzero entries in the graph; negative means keep even zero entries in the graph
</TD></TR>
<TR><TD WIDTH=40></TD><TD ALIGN=LEFT VALIGN=TOP><B>n </B></TD><TD>- number of threshold values provided in array
</TD></TR></TABLE>
<P>
<H3><FONT COLOR="#CC3333">Options Database Key</FONT></H3>
<TABLE border="0" cellpadding="0" cellspacing="0">
<TR><TD WIDTH=40></TD><TD ALIGN=LEFT VALIGN=TOP><B>-pc_gamg_threshold &lt;threshold&gt;</B></TD></TABLE>
<P>
<H3><FONT COLOR="#CC3333">Notes</FONT></H3>
Increasing the threshold decreases the rate of coarsening. Conversely reducing the threshold increases the rate of coarsening (aggressive coarsening) and thereby reduces the complexity of the coarse grids, and generally results in slower solver converge rates. Reducing coarse grid complexity reduced the complexity of Galerkin coarse grid construction considerably.
Before coarsening or aggregating the graph, GAMG removes small values from the graph with this threshold, and thus reducing the coupling in the graph and a different (perhaps better) coarser set of points.
<P>
If n is less than the total number of coarsenings (see <A HREF="../PC/PCGAMGSetNlevels.html#PCGAMGSetNlevels">PCGAMGSetNlevels</A>()), then threshold scaling (see <A HREF="../PC/PCGAMGSetThresholdScale.html#PCGAMGSetThresholdScale">PCGAMGSetThresholdScale</A>()) is used for each successive coarsening.
In this case, <A HREF="../PC/PCGAMGSetThresholdScale.html#PCGAMGSetThresholdScale">PCGAMGSetThresholdScale</A>() must be called before <A HREF="../PC/PCGAMGSetThreshold.html#PCGAMGSetThreshold">PCGAMGSetThreshold</A>().
If n is greater than the total number of levels, the excess entries in threshold will not be used.
<P>

<P>
<H3><FONT COLOR="#CC3333">See Also</FONT></H3>
 <A HREF="../PC/PCGAMGFilterGraph.html#PCGAMGFilterGraph">PCGAMGFilterGraph</A>(), <A HREF="../PC/PCGAMGSetSquareGraph.html#PCGAMGSetSquareGraph">PCGAMGSetSquareGraph</A>()
<BR><P><B></B><H3><FONT COLOR="#CC3333">Level</FONT></H3>intermediate<BR>
<H3><FONT COLOR="#CC3333">Location</FONT></H3>
</B><A HREF="../../../src/ksp/pc/impls/gamg/gamg.c.html#PCGAMGSetThreshold">src/ksp/pc/impls/gamg/gamg.c</A>
<P><H3><FONT COLOR="CC3333">Implementations</FONT></H3><A HREF="../../../src/ksp/pc/impls/gamg/gamg.c.html#PCGAMGSetThreshold_GAMG">PCGAMGSetThreshold_GAMG in src/ksp/pc/impls/gamg/gamg.c</A><BR>
<BR><A HREF="./index.html">Index of all PC routines</A>
<BR><A HREF="../../index.html">Table of Contents for all manual pages</A>
<BR><A HREF="../singleindex.html">Index of all manual pages</A>
</BODY></HTML>